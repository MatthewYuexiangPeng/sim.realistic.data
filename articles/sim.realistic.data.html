<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Small demo of the sim.realistic.data package â€¢ sim.realistic.data</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Small demo of the sim.realistic.data package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">sim.realistic.data</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.9.5</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item"><a class="nav-link" href="../articles/sim.realistic.data.html">Get Started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Small demo of the sim.realistic.data package</h1>
                        <h4 data-toc-skip class="author">Yuexiang
Peng</h4>
            
            <h4 data-toc-skip class="date">2024-11-23</h4>
      

      <div class="d-none name"><code>sim.realistic.data.Rmd</code></div>
    </div>

    
    
<p>This is a small demo of the <code>sim.realistic.data</code> package.
The package is designed to generate realistic data for simulation
studies using shareable summary statistics. The package can be used for
abstract summary statistics needed for data generation, and simulating
data using the corresponding summary statistics as inputs.</p>
<div class="section level2">
<h2 id="the-usage-of-get-summstat-survival-function">The usage of get.summstat.survival function<a class="anchor" aria-label="anchor" href="#the-usage-of-get-summstat-survival-function"></a>
</h2>
<p>Let us first load the package and the example data.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://matthewyuexiangpeng.github.io/sim.realistic.data/">sim.realistic.data</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">)</span></span>
<span><span class="va">E</span> <span class="op">&lt;-</span> <span class="va">example_data</span><span class="op">$</span><span class="va">E</span></span>
<span><span class="va">Y</span> <span class="op">&lt;-</span> <span class="va">example_data</span><span class="op">$</span><span class="va">Y</span></span>
<span><span class="va">X</span> <span class="op">&lt;-</span> <span class="va">example_data</span><span class="op">$</span><span class="va">X</span></span>
<span><span class="va">B</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"B.1"</span>, <span class="st">"B.2"</span>, <span class="st">"B.3"</span>, <span class="st">"B.4"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="va">A</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">as.matrix</a></span><span class="op">(</span><span class="va">example_data</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A1"</span>, <span class="st">"A2"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p>Then, as this is a survival dataset, we can use the
<code>get.summstat.survival</code> function to get the summary
statistics for survival data which can be used to generate new data. We
can choose from mathod 1, 2, 3, all, corrsponding to (1) the
multivariate normal thresholding for A and B, (2) the multivariate
normal thresholding only for B, and regressing A on B, (3) regressing A
on B, and the chain of regression methods, (4) all summary statistics
needed for the three methods, respectively. See more details in the
manuscript.</p>
<p>Here is a demonstration of what we get using the method 1,
multivariate normal thresholding:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summstat.survival</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get.summstat.survival.html">get.summstat.survival</a></span><span class="op">(</span><span class="va">E</span>, <span class="va">Y</span>, <span class="va">X</span>, <span class="va">B</span>, <span class="va">A</span>, method <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">summstat.survival</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 12</span></span>
<span><span class="co">#&gt;  $ n                     : int 240635</span></span>
<span><span class="co">#&gt;  $ P.presc.topK          :'data.frame':  1 obs. of  1 variable:</span></span>
<span><span class="co">#&gt;   ..$ 30: num 0.00485</span></span>
<span><span class="co">#&gt;  $ prescription.mode.topK: num 30</span></span>
<span><span class="co">#&gt;  $ adj.coef.event        : Named num [1:13] 15.249 -1.126 1.088 -0.553 -0.484 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr [1:13] "Intercept" "X" "B.1" "B.2" ...</span></span>
<span><span class="co">#&gt;  $ adj.scale.event       : num 1.32</span></span>
<span><span class="co">#&gt;  $ logHR.X               : num 0.854</span></span>
<span><span class="co">#&gt;  $ coef.XonZ             : Named num [1:12] 0.309 -0.734 -0.25 -0.541 -0.443 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr [1:12] "" "B.1" "B.2" "B.3" ...</span></span>
<span><span class="co">#&gt;  $ P.ord                 :List of 6</span></span>
<span><span class="co">#&gt;   ..$ B.1: num [1:2] 0.88 0.12</span></span>
<span><span class="co">#&gt;   ..$ B.2: num [1:2] 0.824 0.176</span></span>
<span><span class="co">#&gt;   ..$ B.3: num [1:2] 0.75 0.25</span></span>
<span><span class="co">#&gt;   ..$ B.4: num [1:2] 0.498 0.502</span></span>
<span><span class="co">#&gt;   ..$ A1 : num [1:4] 0.217 0.237 0.25 0.296</span></span>
<span><span class="co">#&gt;   ..$ A2 : num [1:5] 0.212 0.23 0.201 0.181 0.176</span></span>
<span><span class="co">#&gt;  $ Quants.norm           :List of 6</span></span>
<span><span class="co">#&gt;   ..$ : num [1:2] 1.17 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:2] 0.929 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:2] 0.675 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:2] -0.00459 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:4] -0.784 -0.117 0.535 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:5] -0.799 -0.145 0.366 0.931 Inf</span></span>
<span><span class="co">#&gt;  $ Corr.norm             : num [1:6, 1:6] 1 0.54673 0.64219 -0.00637 0.17162 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:6] "B.1" "B.2" "B.3" "B.4" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:6] "B.1" "B.2" "B.3" "B.4" ...</span></span>
<span><span class="co">#&gt;  $ simple.coef.cens      : Named num 4.98</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr "Intercept"</span></span>
<span><span class="co">#&gt;  $ simple.scale.cens     : num 0.781</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-usage-of-get-summstat-binary-function">The usage of get.summstat.binary function<a class="anchor" aria-label="anchor" href="#the-usage-of-get-summstat-binary-function"></a>
</h2>
<p>Similarly, if we only have or want to model the outcome as binary, we
can use the <code>get.summstat.binary</code> function to get the summary
statistics for binary data which can be used to generate new data.
Again, we have the choice of method 1, 2, 3, all. Here is a
demonstration of what we get using the method 1, multivariate normal
thresholding:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">summstat.binary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get.summstat.binary.html">get.summstat.binary</a></span><span class="op">(</span><span class="va">Y</span>, <span class="va">X</span>, <span class="va">B</span>, <span class="va">A</span>, method <span class="op">=</span> <span class="st">"1"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/str.html" class="external-link">str</a></span><span class="op">(</span><span class="va">summstat.binary</span><span class="op">)</span></span>
<span><span class="co">#&gt; List of 8</span></span>
<span><span class="co">#&gt;  $ n          : int 240635</span></span>
<span><span class="co">#&gt;  $ coef.Yon1  : Named num -7.9</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr ""</span></span>
<span><span class="co">#&gt;  $ coef.YonX  : Named num 0.86</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr "X"</span></span>
<span><span class="co">#&gt;  $ coef.YonZ  : Named num [1:11] -0.829 0.419 0.369 0.43 0.062 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr [1:11] "B.1" "B.2" "B.3" "B.4" ...</span></span>
<span><span class="co">#&gt;  $ coef.XonZ  : Named num [1:12] 0.309 -0.734 -0.25 -0.541 -0.443 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "names")= chr [1:12] "" "B.1" "B.2" "B.3" ...</span></span>
<span><span class="co">#&gt;  $ P.ord      :List of 6</span></span>
<span><span class="co">#&gt;   ..$ B.1: num [1:2] 0.88 0.12</span></span>
<span><span class="co">#&gt;   ..$ B.2: num [1:2] 0.824 0.176</span></span>
<span><span class="co">#&gt;   ..$ B.3: num [1:2] 0.75 0.25</span></span>
<span><span class="co">#&gt;   ..$ B.4: num [1:2] 0.498 0.502</span></span>
<span><span class="co">#&gt;   ..$ A1 : num [1:4] 0.217 0.237 0.25 0.296</span></span>
<span><span class="co">#&gt;   ..$ A2 : num [1:5] 0.212 0.23 0.201 0.181 0.176</span></span>
<span><span class="co">#&gt;  $ Quants.norm:List of 6</span></span>
<span><span class="co">#&gt;   ..$ : num [1:2] 1.17 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:2] 0.929 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:2] 0.675 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:2] -0.00459 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:4] -0.784 -0.117 0.535 Inf</span></span>
<span><span class="co">#&gt;   ..$ : num [1:5] -0.799 -0.145 0.366 0.931 Inf</span></span>
<span><span class="co">#&gt;  $ Corr.norm  : num [1:6, 1:6] 1 0.54673 0.64219 -0.00637 0.17162 ...</span></span>
<span><span class="co">#&gt;   ..- attr(*, "dimnames")=List of 2</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:6] "B.1" "B.2" "B.3" "B.4" ...</span></span>
<span><span class="co">#&gt;   .. ..$ : chr [1:6] "B.1" "B.2" "B.3" "B.4" ...</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-usage-of-generate-data-survival-function">The usage of generate.data.survival function<a class="anchor" aria-label="anchor" href="#the-usage-of-generate-data-survival-function"></a>
</h2>
<p>Now, after we abstract the summary statistics, or have the summary
statistics from other sources, we can use the
<code>generate.data.survival</code> function to generate new survival
data.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">summstat.survival</span><span class="op">)</span></span>
<span><span class="va">summstat.survival</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">summstat.survival</span><span class="op">)</span></span>
<span><span class="va">simulated_data_survival</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate.data.survival.html">generate.data.survival</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">100</span>,Summ.Stat<span class="op">=</span><span class="va">summstat.survival</span>,method<span class="op">=</span><span class="fl">1</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">simulated_data_survival</span><span class="op">)</span></span>
<span><span class="co">#&gt;   B.bin1 B.bin2 B.bin3 B.bin4 A.cat1_level1 A.cat1_level2 A.cat1_level3</span></span>
<span><span class="co">#&gt; 1      0      1      0      0         FALSE          TRUE         FALSE</span></span>
<span><span class="co">#&gt; 2      0      0      0      0         FALSE         FALSE          TRUE</span></span>
<span><span class="co">#&gt; 3      0      1      1      1         FALSE         FALSE          TRUE</span></span>
<span><span class="co">#&gt; 4      1      1      0      0          TRUE         FALSE         FALSE</span></span>
<span><span class="co">#&gt; 5      0      1      1      0          TRUE         FALSE         FALSE</span></span>
<span><span class="co">#&gt; 6      1      0      1      1         FALSE          TRUE         FALSE</span></span>
<span><span class="co">#&gt;   A.cat2_level1 A.cat2_level2 A.cat2_level3 A.cat2_level4 X Y   E</span></span>
<span><span class="co">#&gt; 1         FALSE         FALSE         FALSE          TRUE 1 0 185</span></span>
<span><span class="co">#&gt; 2         FALSE         FALSE          TRUE         FALSE 1 0  49</span></span>
<span><span class="co">#&gt; 3         FALSE         FALSE          TRUE         FALSE 0 0 198</span></span>
<span><span class="co">#&gt; 4         FALSE         FALSE         FALSE         FALSE 1 0 170</span></span>
<span><span class="co">#&gt; 5         FALSE          TRUE         FALSE         FALSE 1 0  48</span></span>
<span><span class="co">#&gt; 6         FALSE         FALSE          TRUE         FALSE 1 0  46</span></span></code></pre></div>
<p>Also, we can designate the hazard ratio for the treatment effect for
the new data. Here is an example:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">simulated_data_survival_HR</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate.data.survival.html">generate.data.survival</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">100</span>,Summ.Stat<span class="op">=</span><span class="va">summstat.survival</span>,method<span class="op">=</span><span class="fl">1</span>,set.logHR.X<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">simulated_data_survival_HR</span><span class="op">)</span></span>
<span><span class="co">#&gt;   B.bin1 B.bin2 B.bin3 B.bin4 A.cat1_level1 A.cat1_level2 A.cat1_level3</span></span>
<span><span class="co">#&gt; 1      0      0      0      0         FALSE         FALSE         FALSE</span></span>
<span><span class="co">#&gt; 2      0      0      0      0         FALSE         FALSE         FALSE</span></span>
<span><span class="co">#&gt; 3      0      0      0      1          TRUE         FALSE         FALSE</span></span>
<span><span class="co">#&gt; 4      0      0      1      1         FALSE          TRUE         FALSE</span></span>
<span><span class="co">#&gt; 5      0      0      0      0         FALSE          TRUE         FALSE</span></span>
<span><span class="co">#&gt; 6      0      0      0      1         FALSE         FALSE         FALSE</span></span>
<span><span class="co">#&gt;   A.cat2_level1 A.cat2_level2 A.cat2_level3 A.cat2_level4 X Y   E</span></span>
<span><span class="co">#&gt; 1         FALSE         FALSE          TRUE         FALSE 1 0  43</span></span>
<span><span class="co">#&gt; 2          TRUE         FALSE         FALSE         FALSE 1 0 107</span></span>
<span><span class="co">#&gt; 3         FALSE         FALSE         FALSE          TRUE 1 0  75</span></span>
<span><span class="co">#&gt; 4         FALSE         FALSE          TRUE         FALSE 1 0  82</span></span>
<span><span class="co">#&gt; 5         FALSE          TRUE         FALSE         FALSE 0 0  35</span></span>
<span><span class="co">#&gt; 6         FALSE         FALSE         FALSE         FALSE 0 0  36</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-usage-of-generate-data-binary-function">The usage of generate.data.binary function<a class="anchor" aria-label="anchor" href="#the-usage-of-generate-data-binary-function"></a>
</h2>
<p>Similarly, we can use the <code>generate.data.binary</code> function
to generate new binary data:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">summstat.binary</span><span class="op">)</span></span>
<span><span class="va">summstat.binary</span> <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="va">summstat.binary</span><span class="op">)</span></span>
<span><span class="va">simulated_data_binary</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/generate.data.binary.html">generate.data.binary</a></span><span class="op">(</span>n<span class="op">=</span><span class="fl">100</span>,Summ.Stat<span class="op">=</span><span class="va">summstat.binary</span>, method<span class="op">=</span><span class="fl">1</span>,set.logOR.X<span class="op">=</span><span class="fl">1.5</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">simulated_data_binary</span><span class="op">)</span></span>
<span><span class="co">#&gt;   B.bin1 B.bin2 B.bin3 B.bin4 A.cat1_level1 A.cat1_level2 A.cat1_level3</span></span>
<span><span class="co">#&gt; 1      0      0      0      1          TRUE         FALSE         FALSE</span></span>
<span><span class="co">#&gt; 2      0      0      0      1         FALSE          TRUE         FALSE</span></span>
<span><span class="co">#&gt; 3      0      0      1      1         FALSE         FALSE          TRUE</span></span>
<span><span class="co">#&gt; 4      0      0      0      1         FALSE         FALSE         FALSE</span></span>
<span><span class="co">#&gt; 5      0      0      1      1         FALSE         FALSE          TRUE</span></span>
<span><span class="co">#&gt; 6      1      1      0      0         FALSE         FALSE          TRUE</span></span>
<span><span class="co">#&gt;   A.cat2_level1 A.cat2_level2 A.cat2_level3 A.cat2_level4 X Y</span></span>
<span><span class="co">#&gt; 1         FALSE          TRUE         FALSE         FALSE 1 0</span></span>
<span><span class="co">#&gt; 2         FALSE          TRUE         FALSE         FALSE 1 0</span></span>
<span><span class="co">#&gt; 3          TRUE         FALSE         FALSE         FALSE 1 0</span></span>
<span><span class="co">#&gt; 4         FALSE         FALSE         FALSE          TRUE 0 0</span></span>
<span><span class="co">#&gt; 5         FALSE         FALSE         FALSE         FALSE 1 0</span></span>
<span><span class="co">#&gt; 6         FALSE          TRUE         FALSE         FALSE 1 0</span></span></code></pre></div>
<p>We have demonstrated that the data generated using the methods of
this package have similar performance as the bootstrap resampling
method. However, the resampling method requires access to the original
data, while the methods in this package only require the summary
statistics. In addition, the methods in this package can be used with
more flexibility to generate data with different treatment effects, and
other scenarios including the censor types. For more details about the
method and performance of the package, please refer to the
manuscript.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Yuexiang Peng.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
